document.addEventListener("DOMContentLoaded",function(){console.log("Applying direct button fix");let e=document.querySelectorAll("#patients-view table .action-btn.check-in"),t=document.querySelectorAll("#doctors-view table .action-btn.check-in");console.log(`Found ${e.length} patient view buttons`),console.log(`Found ${t.length} doctor view buttons`),e.forEach(e=>{console.log("Adding patient handler to button:",e),e.onclick=function(e){e.preventDefault(),console.log("Patient View button clicked!");let t=this.closest("tr"),o=t.cells[0].textContent;console.log("Patient ID:",o);let i=document.querySelectorAll('[id$="-view"]');i.forEach(e=>{e.style.display="none"});let n=document.getElementById("medical-record-view");n?(console.log("Showing medical record view"),n.style.display="block",document.querySelector(".header h1").textContent="Patient Medical Record"):console.error("Medical record view not found")}}),t.forEach(e=>{console.log("Adding doctor handler to button:",e),e.onclick=function(e){e.preventDefault(),console.log("Doctor View button clicked!");let t=this.closest("tr"),o=t.cells[0].textContent;console.log("Doctor ID:",o);let i=document.querySelectorAll('[id$="-view"]');i.forEach(e=>{e.style.display="none"});let n=document.getElementById("doctor-profile-view");n?(console.log("Showing doctor profile view"),n.style.display="block",document.querySelector(".header h1").textContent="Doctor Profile"):(console.error("Doctor profile view not found"),alert("Doctor profile view element is missing. Please make sure it's added to your HTML."))}})});const dashboardView=document.getElementById("dashboard-view"),calendarView=document.getElementById("calendar-view"),summaryView=document.getElementById("summary-view"),patientsView=document.getElementById("patients-view"),doctorsView=document.getElementById("doctors-view"),appointmentForm=document.getElementById("appointment-form"),reportsView=document.getElementById("reports-view"),checkinView=document.getElementById("checkin-view"),medicalRecordView=document.getElementById("medical-record-view"),doctorProfileView=document.getElementById("doctor-profile-view"),notificationsView=document.getElementById("notifications-view"),navLinks=document.querySelectorAll(".sidebar-menu a"),viewFilters=document.querySelectorAll(".view-filters button"),settingsToggle=document.getElementById("settings-toggle"),settingsPanel=document.getElementById("settings-panel"),darkModeToggle=document.getElementById("dark-mode-toggle"),highContrastToggle=document.getElementById("high-contrast-toggle"),fontDecrease=document.getElementById("font-decrease"),fontDefault=document.getElementById("font-default"),fontIncrease=document.getElementById("font-increase"),colorOptions=document.querySelectorAll(".color-option"),colorblindButtons=document.querySelectorAll('[id$="anopia"], #normal-color'),actionButtons=document.querySelectorAll(".action-btn"),tabButtons=document.querySelectorAll(".tab-button");function hideAllViews(){dashboardView.style.display="none",calendarView.style.display="none",summaryView.style.display="none",patientsView.style.display="none",doctorsView.style.display="none",appointmentForm.style.display="none",reportsView.style.display="none",checkinView.style.display="none",medicalRecordView.style.display="none",notificationsView.style.display="none",doctorProfileView&&(doctorProfileView.style.display="none")}!function(){function e(){console.log("Setting up cookie notice event listeners");let e=document.getElementById("accept-all");e&&e.addEventListener("click",function(){console.log("Accept all cookies clicked"),localStorage.setItem("cookieConsent","all"),document.getElementById("cookie-notice").style.display="none",console.log("All cookies accepted")});let t=document.getElementById("accept-necessary");t&&t.addEventListener("click",function(){console.log("Accept necessary cookies clicked"),localStorage.setItem("cookieConsent","necessary"),document.getElementById("cookie-notice").style.display="none",console.log("Only necessary cookies accepted")})}console.log("Cookie notice script running"),localStorage.getItem("cookieConsent")?console.log("Cookie consent already given:",localStorage.getItem("cookieConsent")):(console.log("No cookie consent found in localStorage"),(document.getElementById("dashboard-view")||document.querySelector(".header h1")?.textContent==="Dashboard")&&(console.log("Dashboard detected, showing cookie notice"),setTimeout(function e(){console.log("Attempting to show cookie notice");let t=document.getElementById("cookie-notice");t?(console.log("Cookie notice element found, displaying it"),t.style.display="block"):console.error("Cookie notice element not found")},500))),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}(),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("dark-mode-toggle"),t=document.getElementById("high-contrast-toggle"),o=document.querySelectorAll(".color-option"),i=document.querySelectorAll('[id$="anopia"], #normal-color'),n=document.querySelectorAll(".font-size-buttons button");function a(e,t){sessionStorage.setItem(e,t)}function r(){let e="true"===sessionStorage.getItem("darkMode");document.body.classList.toggle("dark-mode",e);let t="true"===sessionStorage.getItem("highContrast");document.body.classList.toggle("high-contrast",t);let o=sessionStorage.getItem("colorTheme")||"default";(function e(t){let o,i,n;switch(t){case"purple":o="#8e24aa",i="#ba68c8",n="142, 36, 170";break;case"green":o="#2e7d32",i="#66bb6a",n="46, 125, 50";break;case"red":o="#d32f2f",i="#ef5350",n="211, 47, 47";break;case"orange":o="#f57c00",i="#ffa726",n="245, 124, 0";break;default:o="#1976d2",i="#64b5f6",n="25, 118, 210"}document.documentElement.style.setProperty("--primary-color",o),document.documentElement.style.setProperty("--secondary-color",i),document.documentElement.style.setProperty("--primary-color-rgb",n)})(o);let i=sessionStorage.getItem("colorblindMode");document.body.classList.remove("protanopia","deuteranopia","tritanopia"),i&&document.body.classList.add(i);let n=sessionStorage.getItem("fontSize")||"16";document.documentElement.style.setProperty("--font-size",`${n}px`),"function"==typeof applyChartTheme&&applyChartTheme()}(function i(){let n="true"===sessionStorage.getItem("darkMode");e&&(e.checked=n);let a="true"===sessionStorage.getItem("highContrast");t&&(t.checked=a);let l=sessionStorage.getItem("colorTheme")||"default";o.forEach(e=>{e.getAttribute("data-theme")===l?e.classList.add("active"):e.classList.remove("active")}),sessionStorage.getItem("colorblindMode"),sessionStorage.getItem("fontSize"),r()})(),e&&(e.addEventListener("change",function(){a("darkMode",this.checked),this.checked&&t&&(t.checked=!1,a("highContrast",!1)),r()}),document.addEventListener("DOMContentLoaded",initializeApp),document.addEventListener("DOMContentLoaded",function(){localStorage.getItem("cookieConsent")||setTimeout(function(){let e=document.getElementById("cookie-notice");e&&(e.style.display="block")},1e3),document.getElementById("accept-all").addEventListener("click",function(){localStorage.setItem("cookieConsent","all"),document.getElementById("cookie-notice").style.display="none",console.log("All cookies accepted")}),document.getElementById("accept-necessary").addEventListener("click",function(){localStorage.setItem("cookieConsent","necessary"),document.getElementById("cookie-notice").style.display="none",console.log("Only necessary cookies accepted")}),document.getElementById("privacy-policy").addEventListener("click",function(e){e.preventDefault(),alert("Privacy Policy: This would display the full privacy policy in a complete application.")}),document.getElementById("terms-of-service").addEventListener("click",function(e){e.preventDefault(),alert("Terms of Service: This would display the terms of service in a complete application.")}),document.getElementById("accessibility").addEventListener("click",function(e){e.preventDefault(),alert("Accessibility Statement: This would display our accessibility commitment in a complete application.")})}),document.addEventListener("DOMContentLoaded",function(){function e(e){let t=document.querySelectorAll(e);return t.forEach(e=>{let t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}),document.querySelectorAll(e)}console.log("Loading the view button fix...");let t=e("#patients-view table .action-btn.check-in"),o=e("#doctors-view table .action-btn.check-in");function i(e){document.querySelectorAll("#doctor-profile-view .tab-content").forEach(e=>{e.style.display="none"}),document.querySelectorAll("#doctor-profile-view .tab-button").forEach(e=>{e.classList.remove("active")});let t=document.getElementById(e+"-tab");t&&(t.style.display="block");let o=document.querySelector(`#doctor-profile-view .tab-button[data-tab="${e}"]`);o&&o.classList.add("active")}console.log(`Found ${t.length} patient view buttons and ${o.length} doctor view buttons`),t.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();let t=this.closest("tr"),o=t.cells[0].textContent;console.log("Patient ID clicked:",o),hideAllViews();let i=document.getElementById("medical-record-view");i?(i.style.display="block",document.querySelector(".header h1").textContent="Patient Medical Record",console.log("Showing medical record for patient:",o)):console.error("Medical record view not found")})}),o.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();let t=this.closest("tr"),o=t.cells[0].textContent;console.log("Doctor ID clicked:",o),hideAllViews();let n=document.getElementById("doctor-profile-view");n?(n.style.display="block",function e(t){let o={D1001:{name:"Dr. Sarah Johnson",specialty:"Family Medicine",office:"Room 304",phone:"(555) 111-2222",email:"sarah.johnson@hartfordmedical.org",education:"University of Michigan Medical School",certification:"American Board of Family Medicine",affiliations:"Hartford General Hospital, Community Medical Center",experience:"10",hours:"Monday, Wednesday, Friday: 8:00 AM - 5:00 PM",assistant:"Mary Wilson",status:"Available",patients:"8",directLine:"(555) 111-2223",bio:"Dr. Sarah Johnson is a board-certified family physician with over 10 years of experience. She specializes in preventive care and chronic disease management. Dr. Johnson takes a holistic approach to patient care, focusing on the whole person rather than just treating symptoms."},D1002:{name:"Dr. Michael Chen",specialty:"Endocrinology",office:"Room 218",phone:"(555) 222-3333",email:"michael.chen@hartfordmedical.org",education:"Johns Hopkins University School of Medicine",certification:"American Board of Internal Medicine, Endocrinology",affiliations:"Hartford General Hospital, Diabetes Care Center",experience:"12",hours:"Monday, Tuesday, Thursday: 9:00 AM - 4:00 PM",assistant:"Robert Davis",status:"Available",patients:"6",directLine:"(555) 222-3334",bio:"Dr. Michael Chen is a renowned endocrinologist specializing in diabetes management and thyroid disorders. With his expertise in hormone-related conditions, Dr. Chen provides comprehensive care for patients with complex endocrine issues. He is committed to patient education and empowerment."},D1003:{name:"Dr. James Wilson",specialty:"Cardiology",office:"Room 210",phone:"(555) 333-4444",email:"james.wilson@hartfordmedical.org",education:"Harvard Medical School",certification:"American Board of Internal Medicine, Cardiovascular Disease",affiliations:"Hartford General Hospital, Heart Institute",experience:"15",hours:"On leave until March 10, 2025",assistant:"Jennifer Adams",status:"On Leave",patients:"0",directLine:"(555) 333-4445",bio:"Dr. James Wilson is a cardiologist specializing in preventive cardiology and cardiovascular risk assessment. With over 15 years of experience, he has helped countless patients manage and reduce their risk of heart disease through lifestyle modifications and medical interventions when necessary."},D1004:{name:"Dr. Emily Rodriguez",specialty:"OB/GYN",office:"Room 315",phone:"(555) 444-5555",email:"emily.rodriguez@hartfordmedical.org",education:"Yale School of Medicine",certification:"American Board of Obstetrics and Gynecology",affiliations:"Hartford General Hospital, Women's Health Center",experience:"8",hours:"Tuesday, Wednesday, Friday: 8:30 AM - 4:30 PM",assistant:"Sarah Thompson",status:"Available",patients:"5",directLine:"(555) 444-5556",bio:"Dr. Emily Rodriguez is dedicated to providing compassionate women's healthcare at all stages of life. She specializes in prenatal care, gynecological surgery, and menopausal health. Dr. Rodriguez is passionate about women's health education and preventive care."},D1005:{name:"Dr. Robert Thompson",specialty:"Orthopedics",office:"Room 220",phone:"(555) 555-6666",email:"robert.thompson@hartfordmedical.org",education:"Stanford University School of Medicine",certification:"American Board of Orthopedic Surgery",affiliations:"Hartford General Hospital, Sports Medicine Center",experience:"15",hours:"Monday, Thursday, Friday: 7:30 AM - 3:30 PM",assistant:"Patricia Martinez",status:"In Surgery",patients:"3",directLine:"(555) 555-6667",bio:"Dr. Robert Thompson specializes in sports medicine and joint replacement surgery. He has extensive experience treating athletes of all levels and helping patients recover from orthopedic injuries. Dr. Thompson employs the latest minimally invasive techniques to improve outcomes and reduce recovery time."},D1006:{name:"Dr. Lisa Clark",specialty:"Rheumatology",office:"Room 225",phone:"(555) 666-7777",email:"lisa.clark@hartfordmedical.org",education:"Duke University School of Medicine",certification:"American Board of Internal Medicine, Rheumatology",affiliations:"Hartford General Hospital, Arthritis Treatment Center",experience:"9",hours:"Monday, Tuesday, Thursday, Friday: 9:00 AM - 5:00 PM",assistant:"Michael Rodriguez",status:"Available",patients:"4",directLine:"(555) 666-7778",bio:"Dr. Lisa Clark is a rheumatologist specializing in the diagnosis and treatment of autoimmune and inflammatory conditions affecting the joints, muscles, and bones. She is particularly interested in early intervention for rheumatoid arthritis and innovative treatments for lupus and other complex autoimmune disorders."},D1007:{name:"Dr. David Lee",specialty:"Neurology",office:"Room 312",phone:"(555) 777-8888",email:"david.lee@hartfordmedical.org",education:"Columbia University College of Physicians and Surgeons",certification:"American Board of Psychiatry and Neurology",affiliations:"Hartford General Hospital, Neurological Institute",experience:"14",hours:"Monday, Wednesday, Thursday: 8:00 AM - 4:00 PM",assistant:"Jessica Taylor",status:"Available",patients:"7",directLine:"(555) 777-8889",bio:"Dr. David Lee is a neurologist who specializes in the diagnosis and treatment of disorders affecting the brain, spinal cord, and peripheral nerves. He has particular expertise in treating headache disorders, epilepsy, and multiple sclerosis, and employs the latest diagnostic techniques and treatment approaches."},D1008:{name:"Dr. Jennifer Parker",specialty:"Pediatrics",office:"Room 305",phone:"(555) 888-9999",email:"jennifer.parker@hartfordmedical.org",education:"University of Pennsylvania School of Medicine",certification:"American Board of Pediatrics",affiliations:"Hartford General Hospital, Children's Medical Center",experience:"7",hours:"Monday through Friday: 8:30 AM - 4:30 PM",assistant:"David Wilson",status:"Available",patients:"9",directLine:"(555) 888-9990",bio:"Dr. Jennifer Parker is a compassionate pediatrician dedicated to the health and well-being of children from birth through adolescence. She provides comprehensive care including well-child visits, immunizations, developmental screenings, and treatment of acute and chronic illnesses. Dr. Parker emphasizes preventive care and strong doctor-patient-family relationships."},D1009:{name:"Dr. Thomas Anderson",specialty:"Psychiatry",office:"Room 410",phone:"(555) 999-0000",email:"thomas.anderson@hartfordmedical.org",education:"New York University School of Medicine",certification:"American Board of Psychiatry and Neurology, Psychiatry",affiliations:"Hartford General Hospital, Behavioral Health Center",experience:"11",hours:"Tuesday, Wednesday, Friday: 9:00 AM - 6:00 PM",assistant:"Lisa Miller",status:"With Patient",patients:"6",directLine:"(555) 999-0001",bio:"Dr. Thomas Anderson is a psychiatrist specializing in mood and anxiety disorders, PTSD, and depression. He takes an integrative approach to mental health, combining evidence-based medication management with psychotherapy when appropriate. Dr. Anderson is committed to reducing the stigma around mental health issues and providing compassionate care to all patients."},D1010:{name:"Dr. Maria Gonzalez",specialty:"Dermatology",office:"Room 320",phone:"(555) 000-1111",email:"maria.gonzalez@hartfordmedical.org",education:"University of California, San Francisco School of Medicine",certification:"American Board of Dermatology",affiliations:"Hartford General Hospital, Skin Care Center",experience:"10",hours:"Monday, Wednesday, Thursday: 8:30 AM - 4:30 PM",assistant:"John Smith",status:"Available",patients:"5",directLine:"(555) 000-1112",bio:"Dr. Maria Gonzalez is a board-certified dermatologist specializing in both medical and cosmetic dermatology. She provides comprehensive care for skin conditions including acne, eczema, psoriasis, and skin cancer. Dr. Gonzalez is known for her thorough skin examinations and patient-centered approach to treatment."}}[t];if(o){let n=document.querySelector(".header h1");n&&(n.textContent=o.name);let a={"doctor-name":o.name,"doctor-id":t,"doctor-specialty":o.specialty,"doctor-office":o.office,"doctor-phone":o.phone};for(let[r,l]of Object.entries(a)){let s=document.getElementById(r);s&&(s.textContent=l)}let c=document.getElementById("doctor-status");c&&(c.textContent=o.status,c.className="alert","Available"===o.status?c.classList.add("medication"):"In Surgery"===o.status||"With Patient"===o.status?c.classList.add("diabetes"):"On Leave"===o.status&&c.classList.add("allergy"));let d=document.getElementById("doctor-patients");d&&(d.textContent="Patients Today: "+o.patients);let h={"doctor-education":o.education,"doctor-certification":o.certification,"doctor-affiliations":o.affiliations,"doctor-experience":o.experience,"doctor-email":o.email,"doctor-direct-line":o.directLine,"doctor-hours":o.hours,"doctor-assistant":o.assistant,"doctor-bio":o.bio};for(let[p,y]of Object.entries(h)){let m=document.getElementById(p);m&&"value"in m&&(m.value=y)}i("doctor-summary")}else console.error("Doctor data not found for ID:",t)}(o)):(console.error("Doctor profile view not found in the DOM"),alert("Please make sure the doctor-profile-view element is added to your HTML"))})});let n=document.querySelectorAll("#doctor-profile-view .tab-button");n.forEach(e=>{e.addEventListener("click",function(){let e=this.getAttribute("data-tab");i(e)})})})),t&&t.addEventListener("change",function(){a("highContrast",this.checked),this.checked&&e&&(e.checked=!1,a("darkMode",!1)),this.checked&&a("colorblindMode",""),r()}),o.forEach(e=>{e.addEventListener("click",function(){let e=this.getAttribute("data-theme");a("colorTheme",e),o.forEach(e=>e.classList.remove("active")),this.classList.add("active"),r()})}),i.forEach(e=>{e.addEventListener("click",function(){let e="normal-color"===this.id?"":this.id;a("colorblindMode",e),e&&t&&t.checked&&(t.checked=!1,a("highContrast",!1)),r()})}),n.length>=3&&(n[0].addEventListener("click",function(){let e=parseInt(sessionStorage.getItem("fontSize")||"16");e>12&&(a("fontSize",e-2),r())}),n[1].addEventListener("click",function(){a("fontSize",16),r()}),n[2].addEventListener("click",function(){let e=parseInt(sessionStorage.getItem("fontSize")||"16");e<24&&(a("fontSize",e+2),r())}))}),navLinks.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),navLinks.forEach(e=>e.classList.remove("active")),this.classList.add("active");let t=this.getAttribute("href").substring(1);hideAllViews(),"dashboard"===t?(dashboardView.style.display="block",document.querySelector(".header h1").textContent="Dashboard"):"calendar"===t?(calendarView.style.display="block",document.querySelector(".header h1").textContent="Calendar"):"summary"===t?(summaryView.style.display="block",document.querySelector(".header h1").textContent="Visitation Summary"):"patients"===t?(patientsView.style.display="block",document.querySelector(".header h1").textContent="Patient Management"):"doctors"===t?(doctorsView.style.display="block",document.querySelector(".header h1").textContent="Provider Management"):"appointments"===t?(appointmentForm.style.display="block",document.querySelector(".header h1").textContent="Schedule Appointment"):"reports"===t?(reportsView.style.display="block",document.querySelector(".header h1").textContent="Reports & Analytics"):"notifications"===t?(notificationsView.style.display="block",document.querySelector(".header h1").textContent="Notifications"):(dashboardView.style.display="block",document.querySelector(".header h1").textContent=t.charAt(0).toUpperCase()+t.slice(1),alert("This section would be implemented in the full application."))})}),document.addEventListener("click",function(e){if(e.target.closest(".logout-button")&&(e.preventDefault(),confirm("Are you sure you want to log out?")&&(window.location.href="login.html")),e.target.closest(".notification-actions button")){let t=e.target,o=t.textContent.trim().toLowerCase(),i=t.closest(".notification-item");"approve"===o?(alert("Schedule change approved!"),i.classList.remove("unread")):"deny"===o?(alert("Request denied. A notification will be sent to the provider."),i.classList.remove("unread")):"view"===o||"review"===o||"view results"===o||"view details"===o||"view report"===o||"view profile"===o||"learn more"===o?(alert("Opening details view..."),i.classList.remove("unread")):"process"===o?(alert("Processing prescription refill..."),i.classList.remove("unread")):"acknowledge"===o&&(alert("Notification acknowledged."),i.classList.remove("unread"))}e.target.closest('a[href="#notifications"]')&&(e.preventDefault(),navLinks.forEach(e=>e.classList.remove("active")),document.querySelector('.sidebar-menu a[href="#notifications"]').classList.add("active"),hideAllViews(),notificationsView.style.display="block",document.querySelector(".header h1").textContent="Notifications"),"mark all as read"===e.target.textContent.trim().toLowerCase()&&e.target.closest(".widget-header")&&(document.querySelectorAll(".notification-item.unread").forEach(e=>{e.classList.remove("unread")}),alert("All notifications marked as read"))}),tabButtons&&tabButtons.forEach(e=>{e.addEventListener("click",function(){let e=this.closest(".medical-record-tabs")||this.closest("#doctor-profile-view")||document,t=e.querySelectorAll(".tab-button");t.forEach(e=>e.classList.remove("active")),this.classList.add("active");let o=this.getAttribute("data-tab"),i=e.parentElement||document;i.querySelectorAll(".tab-content").forEach(e=>{e.style.display="none"});let n=document.getElementById(`${o}-tab`);n&&(n.style.display="block")})}),viewFilters.forEach(e=>{e.addEventListener("click",function(){viewFilters.forEach(e=>e.classList.remove("active")),this.classList.add("active");let e=this.getAttribute("data-view"),t=document.querySelector(".appointments h2");"day"===e?t.textContent="Today's Appointments":"week"===e?t.textContent="This Week's Appointments":"month"===e&&(t.textContent="This Month's Appointments")})}),settingsToggle.addEventListener("click",function(){"block"===settingsPanel.style.display?settingsPanel.style.display="none":settingsPanel.style.display="block"}),darkModeToggle.addEventListener("change",function(){this.checked?(document.body.classList.add("dark-mode"),highContrastToggle.checked=!1,document.body.classList.remove("high-contrast")):document.body.classList.remove("dark-mode")}),highContrastToggle.addEventListener("change",function(){this.checked?(document.body.classList.add("high-contrast"),darkModeToggle.checked=!1,document.body.classList.remove("dark-mode"),document.body.classList.remove("protanopia","deuteranopia","tritanopia")):document.body.classList.remove("high-contrast")});let currentFontSize=parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--font-size"))||16;function initializeApp(){hideAllViews(),dashboardView.style.display="block",navLinks[0].classList.add("active"),viewFilters[0].classList.add("active");let e=new Date;e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}fontDecrease.addEventListener("click",function(){currentFontSize>12&&(currentFontSize-=2,document.documentElement.style.setProperty("--font-size",`${currentFontSize}px`))}),fontIncrease.addEventListener("click",function(){currentFontSize<24&&(currentFontSize+=2,document.documentElement.style.setProperty("--font-size",`${currentFontSize}px`))}),fontDefault.addEventListener("click",function(){currentFontSize=16,document.documentElement.style.setProperty("--font-size",`${currentFontSize}px`)}),colorOptions.forEach(e=>{e.addEventListener("click",function(){let e=this.getAttribute("data-theme");colorOptions.forEach(e=>e.classList.remove("active")),this.classList.add("active"),"purple"===e?(document.documentElement.style.setProperty("--primary-color","#8e24aa"),document.documentElement.style.setProperty("--secondary-color","#ba68c8"),document.documentElement.style.setProperty("--primary-color-rgb","142, 36, 170")):"green"===e?(document.documentElement.style.setProperty("--primary-color","#2e7d32"),document.documentElement.style.setProperty("--secondary-color","#66bb6a"),document.documentElement.style.setProperty("--primary-color-rgb","46, 125, 50")):"red"===e?(document.documentElement.style.setProperty("--primary-color","#d32f2f"),document.documentElement.style.setProperty("--secondary-color","#ef5350"),document.documentElement.style.setProperty("--primary-color-rgb","211, 47, 47")):"orange"===e?(document.documentElement.style.setProperty("--primary-color","#f57c00"),document.documentElement.style.setProperty("--secondary-color","#ffa726"),document.documentElement.style.setProperty("--primary-color-rgb","245, 124, 0")):(document.documentElement.style.setProperty("--primary-color","#1976d2"),document.documentElement.style.setProperty("--secondary-color","#64b5f6"),document.documentElement.style.setProperty("--primary-color-rgb","25, 118, 210"))})}),colorblindButtons.forEach(e=>{e.addEventListener("click",function(){document.body.classList.remove("protanopia","deuteranopia","tritanopia"),"normal-color"!==this.id&&document.body.classList.add(this.id),document.body.classList.contains("high-contrast")&&(highContrastToggle.checked=!1,document.body.classList.remove("high-contrast"))})}),actionButtons.forEach(e=>{(!(e.closest("#patients-view")||e.closest("#doctors-view"))||"view"!==e.textContent.trim().toLowerCase())&&e.addEventListener("click",function(){let e=this.textContent.trim().toLowerCase();if("check in"===e){if("block"===dashboardView.style.display)hideAllViews(),checkinView.style.display="block",document.querySelector(".header h1").textContent="Patient Check-in";else{alert("Patient checked in successfully!");let t=this.closest("tr");t&&(this.disabled=!0,this.textContent="Checked In",this.classList.remove("check-in"),this.classList.add("reschedule"))}}else if("reschedule"===e)alert("Opening reschedule dialog...");else if("cancel"===e){if(confirm("Are you sure you want to cancel this appointment?")){alert("Appointment cancelled successfully!");let o=this.closest("tr");o&&(o.style.textDecoration="line-through",o.style.opacity="0.5")}}else"apply filters"===e?alert("Filters applied! In a complete application, this would filter the table data."):"reset"===e?(alert("Filters reset! In a complete application, this would reset all filters."),document.querySelectorAll('select, input[type="date"]').forEach(e=>{e.value=""})):"schedule appointment"===e?(alert("Appointment scheduled successfully!"),hideAllViews(),dashboardView.style.display="block",document.querySelector(".header h1").textContent="Dashboard"):"complete check-in"===e?(alert("Check-in completed successfully!"),hideAllViews(),dashboardView.style.display="block",document.querySelector(".header h1").textContent="Dashboard"):"generate report"===e?(alert("Report generated successfully!"),document.querySelector(".report-dashboard").style.display="block"):"add new patient"===e||"add new provider"===e?alert("This would open a form to add a new patient or provider in the full application."):"view details"===e?(hideAllViews(),medicalRecordView.style.display="block",document.querySelector(".header h1").textContent="Patient Medical Record"):"request refill"===e?alert("Refill request sent to provider for approval."):"view history"===e?alert("This would show the prescription history in the full application."):"print medication list"===e||"print results"===e||"export to pdf"===e?alert("This would generate a printable document in the full application."):"view results"===e||"view images"===e?alert("This would open the imaging viewer in the full application."):"upload document"===e?alert("This would open a file upload dialog in the full application."):"download"===e&&alert("This would download the document in the full application.")})}),document.getElementById("prev-month").addEventListener("click",function(){alert("In a complete application, this would navigate to the previous month.")}),document.getElementById("next-month").addEventListener("click",function(){alert("In a complete application, this would navigate to the next month.")}),document.getElementById("patient-select")&&document.getElementById("patient-select").addEventListener("change",function(){this.value&&alert("In a real application, this would auto-populate patient details.")}),colorOptions[0].classList.add("active");let chartInstances=[];function generateChartContainers(){destroyExistingCharts();let e=document.querySelector(".report-dashboard");if(!e){console.error("Could not find report-dashboard element");return}clearChartContainers(e),[{title:"Appointments by Provider",type:"bar",data:{labels:["Dr. Johnson","Dr. Chen","Dr. Wilson","Dr. Rodriguez","Dr. Thompson","Dr. Clark","Dr. Lee"],datasets:[{label:"# of Appointments",data:[96,85,72,64,58,53,45],backgroundColor:["rgba(25, 118, 210, 0.7)","rgba(25, 118, 210, 0.6)","rgba(25, 118, 210, 0.5)","rgba(25, 118, 210, 0.4)","rgba(25, 118, 210, 0.35)","rgba(25, 118, 210, 0.3)","rgba(25, 118, 210, 0.25)"],borderColor:"rgba(25, 118, 210, 1)",borderWidth:1}]}},{title:"Appointment Types",type:"pie",data:{labels:["Annual Physical","Follow-up","Consultation","Specialist Referral","Urgent Care"],datasets:[{data:[32,28,18,14,8],backgroundColor:["rgba(76, 175, 80, 0.7)","rgba(33, 150, 243, 0.7)","rgba(255, 152, 0, 0.7)","rgba(156, 39, 176, 0.7)","rgba(244, 67, 54, 0.7)"],borderColor:"white",borderWidth:1}]}}].forEach((t,o)=>{let i=document.createElement("div");i.className="widget chart-container",i.id=`chart-container-${o}`;let n=document.createElement("h3");n.textContent=t.title,i.appendChild(n);let a=document.createElement("div");a.style.width="100%",a.style.height="300px",a.style.position="relative";let r=document.createElement("canvas");if(r.id=`chart-${o}`,a.appendChild(r),i.appendChild(a),e.appendChild(i),"undefined"!=typeof Chart){applyChartTheme();let l=r.getContext("2d"),s=new Chart(l,{type:t.type,data:t.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}});chartInstances.push(s)}else{a.innerHTML="";let c=document.createElement("div");c.className="chart-placeholder";let d=document.createElement("img");d.src="/api/placeholder/500/300",d.alt=`${t.type.charAt(0).toUpperCase()+t.type.slice(1)} chart showing ${t.title.toLowerCase()}`,c.appendChild(d),a.appendChild(c)}}),console.log("Chart containers generated successfully")}function destroyExistingCharts(){chartInstances.forEach(e=>{e&&"function"==typeof e.destroy&&e.destroy()}),chartInstances=[]}function clearChartContainers(e){let t=e.querySelectorAll(".chart-container");t.forEach(e=>{e.remove()})}function applyChartTheme(){let e=document.body.classList.contains("dark-mode"),t=document.body.classList.contains("high-contrast"),o="#333333";e&&(o="#f5f5f5"),t&&(o="#ffffff"),"undefined"!=typeof Chart&&(Chart.defaults.color=o)}function handleReportTypeChange(){let e=document.getElementById("report-type").value;console.log(`Report type changed to: ${e}`),generateChartContainers()}function debounce(e,t){let o;return function i(...n){let a=()=>{clearTimeout(o),e(...n)};clearTimeout(o),o=setTimeout(a,t)}}document.addEventListener("DOMContentLoaded",function(){let e=debounce(generateChartContainers,250);applyChartTheme();let t=document.getElementById("reports-view");t&&"none"!==t.style.display&&e();let o=document.querySelector('.sidebar-menu a[href="#reports"]');o&&o.addEventListener("click",function(){setTimeout(e,50)});let i=document.querySelector(".date-range .action-btn.check-in");i&&i.addEventListener("click",e);let n=document.getElementById("report-type");n&&n.addEventListener("change",handleReportTypeChange);let a=document.getElementById("dark-mode-toggle"),r=document.getElementById("high-contrast-toggle");a&&a.addEventListener("change",function(){applyChartTheme(),e()}),r&&r.addEventListener("change",function(){applyChartTheme(),e()}),window.addEventListener("resize",debounce(function(){t&&"none"!==t.style.display&&e()},250))});

const loginForm=document.getElementById("login-form"),verificationForm=document.getElementById("verification-form"),securityForm=document.getElementById("security-form"),usernameRecovery=document.getElementById("username-recovery"),loginButton=document.getElementById("login-button"),verifyButton=document.getElementById("verify-button"),forgotPassword=document.getElementById("forgot-password"),forgotUsername=document.getElementById("forgot-username"),backToLogin=document.getElementById("back-to-login"),backToLogin2=document.getElementById("back-to-login-2"),backToLogin3=document.getElementById("back-to-login-3"),recoverButton=document.getElementById("recover-button"),recoverUsernameButton=document.getElementById("recover-username-button"),settingsToggle=document.getElementById("settings-toggle"),settingsPanel=document.getElementById("settings-panel"),darkModeToggle=document.getElementById("dark-mode-toggle"),highContrastToggle=document.getElementById("high-contrast-toggle"),fontDecrease=document.getElementById("font-decrease"),fontDefault=document.getElementById("font-default"),fontIncrease=document.getElementById("font-increase"),colorOptions=document.querySelectorAll(".color-option"),colorblindButtons=document.querySelectorAll('[id$="anopia"], #normal-color'),usernameInput=document.getElementById("username"),passwordInput=document.getElementById("password"),verificationCode=document.getElementById("verification-code");document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("dark-mode-toggle"),t=document.getElementById("high-contrast-toggle"),o=document.querySelectorAll(".color-option"),n=document.querySelectorAll('[id$="anopia"], #normal-color'),r=document.querySelectorAll(".font-size-buttons button");function i(e,t){sessionStorage.setItem(e,t)}function s(){let e="true"===sessionStorage.getItem("darkMode");document.body.classList.toggle("dark-mode",e);let t="true"===sessionStorage.getItem("highContrast");document.body.classList.toggle("high-contrast",t);let o=sessionStorage.getItem("colorTheme")||"default";(function e(t){let o,n,r;switch(t){case"purple":o="#8e24aa",n="#ba68c8",r="142, 36, 170";break;case"green":o="#2e7d32",n="#66bb6a",r="46, 125, 50";break;case"red":o="#d32f2f",n="#ef5350",r="211, 47, 47";break;case"orange":o="#f57c00",n="#ffa726",r="245, 124, 0";break;default:o="#1976d2",n="#64b5f6",r="25, 118, 210"}document.documentElement.style.setProperty("--primary-color",o),document.documentElement.style.setProperty("--secondary-color",n),document.documentElement.style.setProperty("--primary-color-rgb",r)})(o);let n=sessionStorage.getItem("colorblindMode");document.body.classList.remove("protanopia","deuteranopia","tritanopia"),n&&document.body.classList.add(n);let r=sessionStorage.getItem("fontSize")||"16";document.documentElement.style.setProperty("--font-size",`${r}px`),"function"==typeof applyChartTheme&&applyChartTheme()}(function n(){let r="true"===sessionStorage.getItem("darkMode");e&&(e.checked=r);let i="true"===sessionStorage.getItem("highContrast");t&&(t.checked=i);let l=sessionStorage.getItem("colorTheme")||"default";o.forEach(e=>{e.getAttribute("data-theme")===l?e.classList.add("active"):e.classList.remove("active")}),sessionStorage.getItem("colorblindMode"),sessionStorage.getItem("fontSize"),s()})(),e&&e.addEventListener("change",function(){i("darkMode",this.checked),this.checked&&t&&(t.checked=!1,i("highContrast",!1)),s()}),t&&t.addEventListener("change",function(){i("highContrast",this.checked),this.checked&&e&&(e.checked=!1,i("darkMode",!1)),this.checked&&i("colorblindMode",""),s()}),o.forEach(e=>{e.addEventListener("click",function(){let e=this.getAttribute("data-theme");i("colorTheme",e),o.forEach(e=>e.classList.remove("active")),this.classList.add("active"),s()})}),n.forEach(e=>{e.addEventListener("click",function(){let e="normal-color"===this.id?"":this.id;i("colorblindMode",e),e&&t&&t.checked&&(t.checked=!1,i("highContrast",!1)),s()})}),r.length>=3&&(r[0].addEventListener("click",function(){let e=parseInt(sessionStorage.getItem("fontSize")||"16");e>12&&(i("fontSize",e-2),s())}),r[1].addEventListener("click",function(){i("fontSize",16),s()}),r[2].addEventListener("click",function(){let e=parseInt(sessionStorage.getItem("fontSize")||"16");e<24&&(i("fontSize",e+2),s())}))}),loginButton.addEventListener("click",function(){let e=usernameInput.value.trim(),t=passwordInput.value.trim();if("admin@hospital.org"!==e){document.getElementById("username-error").style.display="block";return}if(""===t){document.getElementById("password-error").style.display="block";return}document.getElementById("username-error").style.display="none",document.getElementById("password-error").style.display="none",loginForm.style.display="none",verificationForm.style.display="block"}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("create-account-link");e&&e.addEventListener("click",function(e){e.preventDefault(),alert("This would open the account creation page")})}),verifyButton.addEventListener("click",function(){let e=verificationCode.value.trim();if(6!==e.length||!/^\d+$/.test(e)){document.getElementById("code-error").style.display="block";return}window.location.href="#dashboard",simulateRedirect()}),forgotPassword.addEventListener("click",function(){loginForm.style.display="none",securityForm.style.display="block"}),forgotUsername.addEventListener("click",function(){loginForm.style.display="none",usernameRecovery.style.display="block"}),backToLogin.addEventListener("click",function(){verificationForm.style.display="none",loginForm.style.display="block"}),backToLogin2.addEventListener("click",function(){securityForm.style.display="none",loginForm.style.display="block"}),backToLogin3.addEventListener("click",function(){usernameRecovery.style.display="none",loginForm.style.display="block"}),recoverButton.addEventListener("click",function(){alert("Password recovery email sent!"),securityForm.style.display="none",loginForm.style.display="block"}),recoverUsernameButton.addEventListener("click",function(){alert("Username recovery email sent!"),usernameRecovery.style.display="none",loginForm.style.display="block"}),settingsToggle.addEventListener("click",function(){"block"===settingsPanel.style.display?settingsPanel.style.display="none":settingsPanel.style.display="block"}),darkModeToggle.addEventListener("change",function(){this.checked?(document.body.classList.add("dark-mode"),highContrastToggle.checked=!1,document.body.classList.remove("high-contrast")):document.body.classList.remove("dark-mode")}),highContrastToggle.addEventListener("change",function(){this.checked?(document.body.classList.add("high-contrast"),darkModeToggle.checked=!1,document.body.classList.remove("dark-mode"),document.body.classList.remove("protanopia","deuteranopia","tritanopia")):document.body.classList.remove("high-contrast")});let currentFontSize=16;function simulateRedirect(){alert("Login successful! Redirecting to dashboard..."),setTimeout(()=>{window.location.href="dashboard.html"},1e3)}fontDecrease.addEventListener("click",function(){currentFontSize>12&&(currentFontSize-=2,document.documentElement.style.setProperty("--font-size",`${currentFontSize}px`))}),fontIncrease.addEventListener("click",function(){currentFontSize<24&&(currentFontSize+=2,document.documentElement.style.setProperty("--font-size",`${currentFontSize}px`))}),fontDefault.addEventListener("click",function(){currentFontSize=16,document.documentElement.style.setProperty("--font-size",`${currentFontSize}px`)}),colorOptions.forEach(e=>{e.addEventListener("click",function(){let e=this.getAttribute("data-theme");colorOptions.forEach(e=>e.classList.remove("active")),this.classList.add("active"),"purple"===e?(document.documentElement.style.setProperty("--primary-color","#8e24aa"),document.documentElement.style.setProperty("--secondary-color","#ba68c8")):"green"===e?(document.documentElement.style.setProperty("--primary-color","#2e7d32"),document.documentElement.style.setProperty("--secondary-color","#66bb6a")):"red"===e?(document.documentElement.style.setProperty("--primary-color","#d32f2f"),document.documentElement.style.setProperty("--secondary-color","#ef5350")):"orange"===e?(document.documentElement.style.setProperty("--primary-color","#f57c00"),document.documentElement.style.setProperty("--secondary-color","#ffa726")):(document.documentElement.style.setProperty("--primary-color","#1976d2"),document.documentElement.style.setProperty("--secondary-color","#64b5f6"))})}),colorblindButtons.forEach(e=>{e.addEventListener("click",function(){document.body.classList.remove("protanopia","deuteranopia","tritanopia"),"normal-color"!==this.id&&document.body.classList.add(this.id),document.body.classList.contains("high-contrast")&&(highContrastToggle.checked=!1,document.body.classList.remove("high-contrast"))})}),colorOptions[0].classList.add("active");
